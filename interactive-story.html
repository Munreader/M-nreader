<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
    <title>M√ºnreader: The Sanctuary Story</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;0,800;0,900;1,400;1,500;1,600;1,700;1,800;1,900&family=Crimson+Text:ital,wght@0,400;0,600;0,700;1,400;1,600&family=Source+Serif+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700;1,900&family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }

        body {
            font-family: 'Playfair Display', 'Crimson Text', 'Source Serif Pro', serif;
            background: #000;
            color: #fff;
            overflow: hidden;
            position: relative;
            height: 100vh;
            width: 100vw;
            text-rendering: optimizeLegibility;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            --primary-color: #ffb6c1;
            --secondary-color: #db7093;
            --tertiary-color: #8b4789;
            --accent-gold: #ffd700;
            --accent-silver: #c0c0c0;
            --accent-crystal: #e0f7fa;
        }

        /* Immersive Background */
        .immersive-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('hero-shot.jpg') center center/cover;
            filter: brightness(0.6) contrast(1.3) saturate(1.1);
            z-index: 1;
            transition: filter 0.8s ease;
        }

        .immersive-background::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, 
                rgba(0,0,0,0.2) 0%, 
                rgba(0,0,0,0.4) 40%, 
                rgba(0,0,0,0.7) 100%);
            z-index: 2;
            animation: breathing 4s ease-in-out infinite;
        }

        @keyframes breathing {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }

        /* iOS Phone Frame */
        .phone-frame {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 375px;
            height: 812px;
            background: linear-gradient(135deg, #1a1a1a, #0a0a0a);
            border-radius: 40px;
            box-shadow: 0 0 0 12px rgba(255,255,255,0.05),
                        0 0 0 1px rgba(255,255,255,0.1),
                        0 20px 60px rgba(0,0,0,0.8),
                        0 0 120px rgba(255,182,193,0.15),
                        inset 0 0 20px rgba(255,182,193,0.05);
            z-index: 10;
            overflow: hidden;
            border: 2px solid rgba(255,255,255,0.08);
        }

        /* iOS Status Bar */
        .status-bar {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 44px;
            background: rgba(0,0,0,0.4);
            backdrop-filter: blur(25px) saturate(180%);
            -webkit-backdrop-filter: blur(25px) saturate(180%);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            z-index: 100;
            font-size: 14px;
            font-weight: 600;
            font-family: 'Inter', sans-serif;
            border-bottom: 1px solid rgba(255,255,255,0.08);
        }

        .status-left {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .status-right {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .signal-bars {
            display: flex;
            gap: 2px;
        }

        .signal-bar {
            width: 3px;
            height: 4px;
            background: #fff;
            border-radius: 1px;
        }

        .signal-bar:nth-child(1) { height: 2px; }
        .signal-bar:nth-child(2) { height: 3px; }
        .signal-bar:nth-child(3) { height: 4px; }
        .signal-bar:nth-child(4) { height: 5px; }

        .battery {
            width: 24px;
            height: 12px;
            border: 1px solid #fff;
            border-radius: 2px;
            position: relative;
            padding: 1px;
        }

        .battery::after {
            content: '';
            position: absolute;
            right: -3px;
            top: 3px;
            width: 2px;
            height: 6px;
            background: #fff;
            border-radius: 0 1px 1px 0;
        }

        .battery-level {
            width: 80%;
            height: 100%;
            background: #fff;
            border-radius: 1px;
        }

        /* Premium Game UI Elements */
        .game-ui-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10;
        }

        .energy-bar {
            position: absolute;
            top: 80px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 8px;
            background: rgba(0,0,0,0.5);
            border: 2px solid var(--accent-gold);
            border-radius: 4px;
            overflow: hidden;
            pointer-events: auto;
        }

        .energy-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-gold), #ffed4e);
            width: 100%;
            transition: width 0.3s ease;
            box-shadow: 0 0 10px var(--accent-gold);
        }

        .level-indicator {
            position: absolute;
            top: 100px;
            right: 20px;
            background: linear-gradient(135deg, rgba(255,215,0,0.2), rgba(255,215,0,0.1));
            backdrop-filter: blur(10px);
            border: 1px solid var(--accent-gold);
            border-radius: 15px;
            padding: 10px 15px;
            font-family: 'Inter', sans-serif;
            font-size: 12px;
            font-weight: 700;
            color: var(--accent-gold);
            text-transform: uppercase;
            letter-spacing: 1px;
            pointer-events: auto;
        }

        .achievement-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: linear-gradient(135deg, rgba(255,215,0,0.3), rgba(255,215,0,0.1));
            backdrop-filter: blur(20px) saturate(150%);
            border: 2px solid var(--accent-gold);
            border-radius: 25px;
            padding: 30px;
            text-align: center;
            z-index: 100;
            pointer-events: auto;
            box-shadow: 0 20px 60px rgba(255,215,0,0.4),
                        0 10px 30px rgba(0,0,0,0.5),
                        inset 0 2px 4px rgba(255,255,255,0.3);
        }

        .achievement-popup.show {
            animation: achievementPop 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

        @keyframes achievementPop {
            0% { transform: translate(-50%, -50%) scale(0) rotate(0deg); }
            50% { transform: translate(-50%, -50%) scale(1.1) rotate(5deg); }
            100% { transform: translate(-50%, -50%) scale(1) rotate(0deg); }
        }

        .achievement-icon {
            font-size: 48px;
            color: var(--accent-gold);
            margin-bottom: 15px;
            text-shadow: 0 2px 10px rgba(255,215,0,0.5);
        }

        .achievement-title {
            font-family: 'Playfair Display', serif;
            font-size: 24px;
            font-weight: 700;
            color: var(--accent-gold);
            margin-bottom: 10px;
        }

        .achievement-desc {
            font-family: 'Crimson Text', serif;
            font-size: 14px;
            color: rgba(255,255,255,0.9);
            line-height: 1.4;
        }

        /* Story Container */
        .story-container {
            position: absolute;
            top: 44px;
            left: 0;
            width: 100%;
            height: calc(100% - 44px - 83px);
            background: rgba(0,0,0,0.3);
            backdrop-filter: blur(15px) saturate(120%);
            -webkit-backdrop-filter: blur(15px) saturate(120%);
            z-index: 50;
            overflow-y: auto;
            padding: 30px 25px;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .story-container::-webkit-scrollbar {
            display: none;
        }

        .story-content {
            max-width: 320px;
            margin: 0 auto;
            text-align: center;
        }

        .story-title {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 25px;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 50%, var(--tertiary-color) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.2;
            letter-spacing: -0.5px;
            text-shadow: 0 2px 20px rgba(255,182,193,0.3);
            font-family: 'Playfair Display', serif;
        }

        .story-text {
            font-size: 17px;
            line-height: 1.8;
            margin-bottom: 35px;
            color: rgba(255,255,255,0.92);
            font-weight: 400;
            font-family: 'Crimson Text', serif;
            letter-spacing: 0.2px;
            text-shadow: 0 1px 3px rgba(0,0,0,0.5);
        }

        .choice-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 30px;
        }

        .choice-button {
            background: linear-gradient(135deg, rgba(255,255,255,0.08), rgba(255,255,255,0.04));
            backdrop-filter: blur(20px) saturate(120%);
            -webkit-backdrop-filter: blur(20px) saturate(120%);
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 25px;
            padding: 18px 24px;
            color: #fff;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            text-align: left;
            position: relative;
            overflow: hidden;
            font-family: 'Inter', sans-serif;
            letter-spacing: 0.3px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2), inset 0 1px 0 rgba(255,255,255,0.1);
        }

        .choice-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255,182,193,0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .choice-button:hover {
            background: linear-gradient(135deg, rgba(255,182,193,0.25), rgba(219,112,147,0.15));
            border-color: rgba(255,182,193,0.4);
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 12px 35px rgba(255,182,193,0.25), 
                        0 4px 20px rgba(0,0,0,0.3),
                        inset 0 1px 0 rgba(255,255,255,0.2);
        }

        .choice-button:active::before {
            width: 300px;
            height: 300px;
        }

        .choice-icon {
            margin-right: 10px;
            font-size: 18px;
        }

        /* iOS Dock */
        .dock {
            position: absolute;
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
            width: 320px;
            height: 67px;
            background: rgba(255,255,255,0.08);
            backdrop-filter: blur(30px) saturate(180%);
            -webkit-backdrop-filter: blur(30px) saturate(180%);
            border-radius: 23px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 18px;
            z-index: 100;
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 8px 32px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.1);
        }

        .dock-app {
            width: 52px;
            height: 52px;
            background: linear-gradient(135deg, rgba(255,255,255,0.12), rgba(255,255,255,0.06));
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            border: 1px solid rgba(255,255,255,0.15);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .dock-app:hover {
            transform: scale(1.15) translateY(-2px);
            background: linear-gradient(135deg, rgba(255,182,193,0.3), rgba(219,112,147,0.2));
            border-color: rgba(255,182,193,0.4);
            box-shadow: 0 8px 25px rgba(255,182,193,0.3), 0 4px 15px rgba(0,0,0,0.3);
        }

        .dock-app.active {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color), var(--tertiary-color));
            border-color: rgba(255,182,193,0.5);
            box-shadow: 0 8px 25px rgba(255,182,193,0.4), inset 0 2px 4px rgba(255,255,255,0.2);
        }

        .dock-icon {
            font-size: 24px;
            color: #fff;
        }

        /* Cherry Blossom Petals */
        .sakura-petal {
            position: fixed;
            width: 12px;
            height: 12px;
            background: radial-gradient(circle at 30% 30%, var(--primary-color), var(--secondary-color), var(--tertiary-color));
            border-radius: 0 100% 0 100%;
            opacity: 0.8;
            z-index: 5;
            pointer-events: none;
            animation: sakura-fall 18s cubic-bezier(0.25, 0.46, 0.45, 0.94) infinite;
            box-shadow: 0 2px 8px rgba(255,182,193,0.3);
        }

        @keyframes sakura-fall {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.7;
            }
            90% {
                opacity: 0.7;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* Story Transitions */
        .fade-in {
            animation: fadeIn 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }

        @keyframes fadeIn {
            0% { 
                opacity: 0; 
                transform: translateY(30px) scale(0.95); 
                filter: blur(10px);
            }
            50% {
                filter: blur(5px);
            }
            100% { 
                opacity: 1; 
                transform: translateY(0) scale(1); 
                filter: blur(0);
            }
        }

        .slide-up {
            animation: slideUp 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

        @keyframes slideUp {
            0% { 
                transform: translateY(100%) scale(0.9); 
                opacity: 0; 
            }
            100% { 
                transform: translateY(0) scale(1); 
                opacity: 1; 
            }
        }

        /* Premium Effects */
        .glow-effect {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, 
                rgba(255,182,193,0.1) 0%, 
                transparent 70%);
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.6s ease;
            z-index: 3;
        }

        .glow-active {
            opacity: 1;
        }

        /* Library Styles */
        .library-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .book-item {
            background: linear-gradient(135deg, rgba(255,255,255,0.08), rgba(255,255,255,0.04));
            backdrop-filter: blur(15px) saturate(120%);
            -webkit-backdrop-filter: blur(15px) saturate(120%);
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 20px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .book-item:hover {
            background: linear-gradient(135deg, rgba(255,182,193,0.2), rgba(219,112,147,0.1));
            border-color: rgba(255,182,193,0.3);
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 12px 35px rgba(255,182,193,0.25);
        }

        .book-cover {
            width: 60px;
            height: 80px;
            background: linear-gradient(135deg, rgba(255,182,193,0.3), rgba(219,112,147,0.2));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: #fff;
        }

        .book-info h3 {
            font-family: 'Playfair Display', serif;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 5px;
            color: #fff;
        }

        .book-info p {
            font-family: 'Crimson Text', serif;
            font-size: 14px;
            color: rgba(255,255,255,0.7);
            line-height: 1.4;
        }

        /* Ritual Styles */
        .ritual-modes {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 20px;
        }

        .ritual-mode {
            background: linear-gradient(135deg, rgba(255,255,255,0.08), rgba(255,255,255,0.04));
            backdrop-filter: blur(15px) saturate(120%);
            -webkit-backdrop-filter: blur(15px) saturate(120%);
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 20px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            text-align: center;
        }

        .ritual-mode:hover {
            background: linear-gradient(135deg, rgba(255,182,193,0.25), rgba(219,112,147,0.15));
            border-color: rgba(255,182,193,0.4);
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 12px 35px rgba(255,182,193,0.25);
        }

        .ritual-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, rgba(255,182,193,0.3), rgba(219,112,147,0.2));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-size: 24px;
            color: #fff;
        }

        .ritual-mode h3 {
            font-family: 'Playfair Display', serif;
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #fff;
        }

        .ritual-mode p {
            font-family: 'Crimson Text', serif;
            font-size: 14px;
            color: rgba(255,255,255,0.8);
            margin-bottom: 10px;
            line-height: 1.4;
        }

        .ritual-time {
            font-family: 'Inter', sans-serif;
            font-size: 12px;
            color: rgba(255,182,193,0.8);
            font-weight: 600;
            background: rgba(255,182,193,0.1);
            padding: 5px 12px;
            border-radius: 12px;
            display: inline-block;
        }

        /* Settings Styles */
        .settings-grid {
            display: flex;
            flex-direction: column;
            gap: 25px;
            margin-top: 20px;
        }

        .setting-item {
            background: linear-gradient(135deg, rgba(255,255,255,0.08), rgba(255,255,255,0.04));
            backdrop-filter: blur(15px) saturate(120%);
            -webkit-backdrop-filter: blur(15px) saturate(120%);
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 20px;
            padding: 25px;
        }

        .setting-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .setting-header i {
            font-size: 20px;
            color: rgba(255,182,193,0.8);
        }

        .setting-header h3 {
            font-family: 'Playfair Display', serif;
            font-size: 18px;
            font-weight: 600;
            color: #fff;
        }

        .setting-control {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .setting-control button {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 12px;
            padding: 8px 16px;
            color: #fff;
            font-family: 'Inter', sans-serif;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .setting-control button:hover {
            background: rgba(255,182,193,0.2);
            border-color: rgba(255,182,193,0.4);
        }

        /* Reading Progress */
        .reading-progress {
            margin-top: 20px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255,255,255,0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ffb6c1, #db7093);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .progress-text {
            font-family: 'Inter', sans-serif;
            font-size: 12px;
            color: rgba(255,255,255,0.7);
            font-weight: 600;
        }

        /* Ritual Active */
        .ritual-active {
            text-align: center;
            margin-top: 30px;
        }

        .ritual-timer {
            margin-bottom: 30px;
        }

        .timer-display {
            font-family: 'Inter', sans-serif;
            font-size: 48px;
            font-weight: 300;
            color: #fff;
            text-shadow: 0 2px 10px rgba(255,182,193,0.5);
            margin-bottom: 5px;
        }

        .timer-label {
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            color: rgba(255,255,255,0.7);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .ritual-status {
            margin: 30px 0;
        }

        .ritual-status i {
            font-size: 36px;
            color: rgba(255,182,193,0.8);
            margin-bottom: 15px;
        }

        .status-text {
            font-family: 'Crimson Text', serif;
            font-size: 16px;
            color: rgba(255,255,255,0.8);
            font-style: italic;
        }

        .ritual-progress {
            margin-top: 30px;
        }

        .progress-ring {
            width: 120px;
            height: 120px;
            margin: 0 auto;
        }

        .progress-ring-circle {
            width: 100%;
            height: 100%;
            border: 3px solid rgba(255,255,255,0.1);
            border-radius: 50%;
            border-top-color: #ffb6c1;
            transform: rotate(-90deg);
            transition: stroke-dasharray 0.3s ease;
        }

        /* Ritual Complete */
        .ritual-complete {
            text-align: center;
            margin: 30px 0;
        }

        .ritual-complete i {
            font-size: 48px;
            color: #ffb6c1;
            margin-bottom: 20px;
        }

        .ritual-stats-complete {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 30px;
        }

        .stat-complete {
            text-align: center;
        }

        .stat-number {
            font-family: 'Inter', sans-serif;
            font-size: 36px;
            font-weight: 700;
            color: #ffb6c1;
            display: block;
            margin-bottom: 5px;
        }

        .stat-label {
            font-family: 'Inter', sans-serif;
            font-size: 12px;
            color: rgba(255,255,255,0.7);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Benefits List */
        .benefits-list {
            margin-top: 20px;
        }

        .benefit-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            padding: 15px;
            background: rgba(255,182,193,0.1);
            border-radius: 12px;
        }

        .benefit-item i {
            color: #ffb6c1;
            font-size: 16px;
        }

        .benefit-item span {
            font-family: 'Crimson Text', serif;
            font-size: 14px;
            color: rgba(255,255,255,0.9);
        }

        /* Parallax Background */
        .parallax-layer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .parallax-bg {
            background: url('hero-shot.jpg') center center/cover;
            filter: brightness(0.5) contrast(1.4) saturate(1.2);
            transform: scale(1.1);
            transition: transform 0.8s ease;
        }

        /* Cinematic Overlay */
        .cinematic-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at center, 
                transparent 0%, 
                rgba(0,0,0,0.2) 50%, 
                rgba(0,0,0,0.6) 100%);
            pointer-events: none;
            z-index: 4;
            mix-blend-mode: multiply;
        }

        /* Development Timeline Styles */
        .timeline-container {
            display: flex;
            flex-direction: column;
            gap: 30px;
            margin-top: 20px;
        }

        .timeline-phase {
            background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
            backdrop-filter: blur(20px) saturate(120%);
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 20px;
            padding: 25px;
            position: relative;
            overflow: hidden;
        }

        .phase-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .phase-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--accent-gold), #ffed4e);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: #fff;
            box-shadow: 0 4px 15px rgba(255,215,0,0.3);
        }

        .phase-info h3 {
            font-family: 'Playfair Display', serif;
            font-size: 20px;
            font-weight: 600;
            color: var(--accent-gold);
            margin-bottom: 5px;
        }

        .phase-date {
            font-family: 'Inter', sans-serif;
            font-size: 12px;
            color: rgba(255,255,255,0.7);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .phase-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .timeline-stats {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.08), rgba(255,255,255,0.04));
            backdrop-filter: blur(15px) saturate(120%);
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: 15px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .stat-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, rgba(255,182,193,0.3), rgba(219,112,147,0.2));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: #fff;
        }

        .stat-details h4 {
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            font-weight: 700;
            color: #fff;
            margin-bottom: 8px;
        }

        .stat-bar {
            width: 100px;
            height: 6px;
            background: rgba(255,255,255,0.1);
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 5px;
        }

        .stat-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-gold), #ffed4e);
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        .stat-label {
            font-family: 'Inter', sans-serif;
            font-size: 10px;
            color: rgba(255,255,255,0.7);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .timeline-milestone {
            background: linear-gradient(135deg, rgba(255,215,0,0.2), rgba(255,215,0,0.1));
            backdrop-filter: blur(25px) saturate(150%);
            border: 2px solid var(--accent-gold);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            margin-top: 20px;
            box-shadow: 0 15px 45px rgba(255,215,0,0.3),
                        0 5px 20px rgba(0,0,0,0.5),
                        inset 0 2px 4px rgba(255,255,255,0.2);
        }

        .milestone-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .milestone-header i {
            font-size: 24px;
            color: var(--accent-gold);
        }

        .milestone-header h3 {
            font-family: 'Playfair Display', serif;
            font-size: 22px;
            font-weight: 700;
            color: var(--accent-gold);
        }

        .milestone-desc {
            font-family: 'Crimson Text', serif;
            font-size: 16px;
            color: rgba(255,255,255,0.9);
            line-height: 1.5;
            margin-bottom: 20px;
        }

        .milestone-progress {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .progress-ring-large {
            width: 80px;
            height: 80px;
            position: relative;
        }

        .progress-ring-large-circle {
            width: 100%;
            height: 100%;
            border: 4px solid rgba(255,255,255,0.1);
            border-radius: 50%;
            border-top-color: var(--accent-gold);
            transform: rotate(-90deg);
            transition: stroke-dasharray 0.5s ease;
        }

        .milestone-percent {
            font-family: 'Inter', sans-serif;
            font-size: 18px;
            font-weight: 700;
            color: var(--accent-gold);
        }

        /* Advanced Particle System */
        .advanced-particle {
            position: fixed;
            pointer-events: none;
            z-index: 6;
        }

        .particle-sakura {
            width: 15px;
            height: 15px;
            background: radial-gradient(circle at 30% 30%, var(--primary-color), var(--secondary-color), var(--tertiary-color));
            border-radius: 0 100% 0 100%;
            opacity: 0.9;
            animation: particle-fall 20s cubic-bezier(0.25, 0.46, 0.45, 0.94) infinite;
            box-shadow: 0 3px 12px rgba(255,182,193,0.4);
        }

        .particle-sparkle {
            width: 4px;
            height: 4px;
            background: radial-gradient(circle, var(--accent-gold), #fff);
            border-radius: 50%;
            opacity: 0;
            animation: sparkle-fade 2s ease-out infinite;
        }

        .particle-glow {
            width: 30px;
            height: 30px;
            background: radial-gradient(circle, var(--accent-gold), transparent);
            border-radius: 50%;
            opacity: 0.3;
            animation: glow-pulse 3s ease-in-out infinite;
        }

        @keyframes particle-fall {
            0% {
                transform: translateY(-100px) rotate(0deg) scale(0);
                opacity: 0;
            }
            10% {
                opacity: 0.8;
                transform: translateY(0) rotate(90deg) scale(1);
            }
            90% {
                opacity: 0.8;
                transform: translateY(80vh) rotate(270deg) scale(1);
            }
            100% {
                transform: translateY(100vh) rotate(360deg) scale(0);
                opacity: 0;
            }
        }

        @keyframes sparkle-fade {
            0%, 100% { opacity: 0; transform: scale(0); }
            50% { opacity: 1; transform: scale(1); }
        }

        @keyframes glow-pulse {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(1.2); }
        }

        /* Ripple Effects */
        .ripple {
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255,182,193,0.4), transparent);
            transform: scale(0);
            animation: ripple-expand 0.6s ease-out;
            pointer-events: none;
        }

        @keyframes ripple-expand {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            100% {
                transform: scale(4);
                opacity: 0;
            }
        }

        /* Premium Button Enhancement */
        .choice-button.premium {
            background: linear-gradient(135deg, rgba(255,215,0,0.15), rgba(255,215,0,0.08));
            border: 2px solid var(--accent-gold);
            box-shadow: 0 8px 32px rgba(255,215,0,0.3),
                        0 4px 20px rgba(0,0,0,0.4),
                        inset 0 2px 4px rgba(255,215,0,0.3);
            animation: premium-glow 2s ease-in-out infinite;
        }

        @keyframes premium-glow {
            0%, 100% { box-shadow: 0 8px 32px rgba(255,215,0,0.3), 0 4px 20px rgba(0,0,0,0.4), inset 0 2px 4px rgba(255,215,0,0.3); }
            50% { box-shadow: 0 12px 45px rgba(255,215,0,0.5), 0 6px 25px rgba(0,0,0,0.5), inset 0 3px 6px rgba(255,215,0,0.4); }
        }

        /* Locked Achievement Items */
        .achievement-item.locked {
            opacity: 0.5;
            filter: grayscale(100%);
        }

        .achievement-item.locked i {
            color: rgba(255,255,255,0.5);
        }
    </style>
</head>
<body>
    <!-- Premium Visual Layers -->
    <div class="parallax-layer parallax-bg"></div>
    <div class="immersive-background"></div>
    <div class="cinematic-overlay"></div>
    <div class="glow-effect" id="glowEffect"></div>

    <!-- Cherry Blossom Petals -->
    <div id="sakuraContainer"></div>

    <!-- Game UI Elements -->
    <div class="game-ui-container">
        <div class="energy-bar">
            <div class="energy-fill" id="energyFill"></div>
        </div>
        <div class="level-indicator" id="levelIndicator">
            Level 1 ‚Ä¢ Seeker
        </div>
    </div>

    <!-- Achievement Popup -->
    <div class="achievement-popup" id="achievementPopup">
        <div class="achievement-icon">üèÜ</div>
        <div class="achievement-title">First Steps</div>
        <div class="achievement-desc">You've begun your journey into the sanctuary</div>
    </div>

    <!-- iOS Phone Frame -->
    <div class="phone-frame">
        <!-- iOS Status Bar -->
        <div class="status-bar">
            <div class="status-left">
                <div class="signal-bars">
                    <div class="signal-bar"></div>
                    <div class="signal-bar"></div>
                    <div class="signal-bar"></div>
                    <div class="signal-bar"></div>
                </div>
            </div>
            <div class="status-right">
                <span id="timeDisplay">9:41</span>
                <div class="battery">
                    <div class="battery-level"></div>
                </div>
            </div>
        </div>

        <!-- Story Container -->
        <div class="story-container" id="storyContainer">
            <div class="story-content fade-in">
                <h1 class="story-title">The Sanctuary Device</h1>
                <p class="story-text">
                    In a world saturated with notifications and digital noise, you discover an artifact unlike any other. 
                    The M√ºnreader glows softly in your hands, its dual screens promising something lost: 
                    sanctuary of deep reading. The vegan suede cover feels ancient yet modern, a paradox of craft and technology.
                </p>
                <div class="choice-container">
                    <button class="choice-button" onclick="makeChoice('explore')">
                        <i class="fas fa-compass choice-icon"></i>
                        Explore Device
                    </button>
                    <button class="choice-button" onclick="makeChoice('ritual')">
                        <i class="fas fa-moon choice-icon"></i>
                        Begin Reading Ritual
                    </button>
                </div>
            </div>
        </div>

        <!-- iOS Dock -->
        <div class="dock">
            <div class="dock-app active" onclick="openApp('story')">
                <i class="fas fa-book dock-icon"></i>
            </div>
            <div class="dock-app" onclick="openApp('library')">
                <i class="fas fa-book-open dock-icon"></i>
            </div>
            <div class="dock-app" onclick="openApp('ritual')">
                <i class="fas fa-moon dock-icon"></i>
            </div>
            <div class="dock-app" onclick="openApp('settings')">
                <i class="fas fa-cog dock-icon"></i>
            </div>
            <div class="dock-app" onclick="openApp('timeline')">
                <i class="fas fa-chart-line dock-icon"></i>
            </div>
        </div>
    </div>

    <script>
        // Story State
        let currentChapter = 0;
        let storyData = {
            chapters: [
                {
                    title: "The Sanctuary Device",
                    text: "In a world saturated with notifications and digital noise, you discover an artifact unlike any other. The M√ºnreader glows softly in your hands, its dual screens promising something lost: the sanctuary of deep reading. The vegan suede cover feels ancient yet modern, a paradox of craft and technology.",
                    choices: [
                        { id: 'explore-left', text: 'Explore Device', icon: 'compass' },
                        { id: 'ritual', text: 'Begin Reading Ritual', icon: 'moon' }
                    ]
                },
                {
                    title: "Whispers of the Past",
                    text: "As your fingers trace the engraved M√úN logo, the device awakens. The left screen displays a single word: 'Explore.' The right screen remains dark, holding secrets. You feel the weight of intention‚Äîthis is not merely technology, but a vessel for presence.",
                    choices: [
                        { id: 'explore-left', text: 'Touch the Explore Screen', icon: 'hand-pointer' },
                        { id: 'listen', text: 'Sit in Sacred Silence', icon: 'volume-mute' }
                    ]
                },
                {
                    title: "The Ritual Begins",
                    text: "The ambient glow along the spine brightens to a warm moon-phase light. The right screen awakens, revealing your personal library. Each book title seems to breathe, waiting. This is more than reading‚Äîthis is communion with text itself.",
                    choices: [
                        { id: 'read', text: 'Open Your First Book', icon: 'book-open' },
                        { id: 'customize', text: 'Customize Your Sanctuary', icon: 'palette' }
                    ]
                },
                {
                    title: "The Choice of Sanctuary",
                    text: "The M√ºnreader responds to your presence, its dual screens dancing between light and shadow. You realize this device chooses its owners as much as they choose it. It demands nothing but offers everything: focus, presence, and the lost art of deep reading.",
                    choices: [
                        { id: 'accept', text: 'Accept the Sanctuary', icon: 'heart' },
                        { id: 'master', text: 'Master the Ritual', icon: 'crown' }
                    ]
                }
            ]
        };

        // Game State
        let gameState = {
            level: 1,
            experience: 0,
            energy: 100,
            achievements: [],
            choices: [],
            readingTime: 0,
            booksRead: 0,
            ritualsCompleted: 0
        };

        // Achievement System
        const achievements = {
            firstChoice: { id: 'firstChoice', title: 'First Choice', desc: 'Made your first decision', icon: 'üéØ' },
            bookOpened: { id: 'bookOpened', title: 'Book Worm', desc: 'Opened your first book', icon: 'üìö' },
            ritualStarted: { id: 'ritualStarted', title: 'Ritual Master', desc: 'Started your first reading ritual', icon: 'üåô' },
            levelUp: { id: 'levelUp', title: 'Level Up!', desc: 'Reached a new level', icon: '‚¨ÜÔ∏è' },
            themeChanged: { id: 'themeChanged', title: 'Style Master', desc: 'Changed your theme', icon: 'üé®' },
            explorer: { id: 'explorer', title: 'Explorer', desc: 'Explored all apps', icon: 'üîç' },
            premiumDeployed: { id: 'premiumDeployed', title: 'Premium Deployed', desc: 'Unlocked premium development timeline', icon: 'üöÄ' }
        };

        // Initialize
        function init() {
            updateTime();
            setInterval(updateTime, 1000);
            createSakuraPetals();
            loadChapter(0);
            initPremiumEffects();
            initGameSystem();
        }

        // Game System
        function initGameSystem() {
            updateEnergyBar();
            updateLevelIndicator();
            
            // Show welcome achievement
            setTimeout(() => {
                showAchievement('firstChoice');
            }, 2000);
        }

        // Update Energy Bar
        function updateEnergyBar() {
            const energyFill = document.getElementById('energyFill');
            if (energyFill) {
                energyFill.style.width = `${gameState.energy}%`;
            }
        }

        // Update Level Indicator
        function updateLevelIndicator() {
            const levelIndicator = document.getElementById('levelIndicator');
            if (levelIndicator) {
                const titles = ['Seeker', 'Reader', 'Scholar', 'Master', 'Sage'];
                const title = titles[Math.min(gameState.level - 1, titles.length - 1)];
                levelIndicator.textContent = `Level ${gameState.level} ‚Ä¢ ${title}`;
            }
        }

        // Show Achievement
        function showAchievement(achievementId) {
            const achievement = achievements[achievementId];
            if (!achievement || gameState.achievements.includes(achievementId)) return;
            
            gameState.achievements.push(achievementId);
            
            const popup = document.getElementById('achievementPopup');
            if (popup) {
                popup.querySelector('.achievement-icon').textContent = achievement.icon;
                popup.querySelector('.achievement-title').textContent = achievement.title;
                popup.querySelector('.achievement-desc').textContent = achievement.desc;
                
                popup.classList.add('show');
                
                // Add experience and check for level up
                addExperience(50);
                
                setTimeout(() => {
                    popup.classList.remove('show');
                }, 3000);
            }
        }

        // Add Experience
        function addExperience(amount) {
            gameState.experience += amount;
            const expNeeded = gameState.level * 100;
            
            if (gameState.experience >= expNeeded) {
                gameState.experience -= expNeeded;
                gameState.level++;
                updateLevelIndicator();
                showAchievement('levelUp');
                
                // Add energy bonus
                gameState.energy = Math.min(100, gameState.energy + 20);
                updateEnergyBar();
            }
        }

        // Enhanced Choice Handler
        function makeChoice(choiceId) {
            console.log('Choice made:', choiceId);
            
            // Add choice to history
            gameState.choices.push(choiceId);
            
            // Add energy cost
            gameState.energy = Math.max(0, gameState.energy - 10);
            updateEnergyBar();
            
            // Add experience
            addExperience(25);
            
            // Check for achievements
            if (gameState.choices.length === 1) {
                showAchievement('firstChoice');
            }
            
            // Add choice animation
            event.target.style.transform = 'scale(0.95)';
            setTimeout(() => {
                event.target.style.transform = '';
            }, 200);

            // Progress story based on choice
            if (choiceId === 'explore' || choiceId === 'explore-left') {
                currentChapter = 1;
            } else if (choiceId === 'ritual' || choiceId === 'listen') {
                currentChapter = 2;
            } else if (choiceId === 'read' || choiceId === 'customize') {
                currentChapter = 3;
            } else if (choiceId === 'accept' || choiceId === 'master') {
                // End of demo - show completion message
                showCompletion();
                return;
            }

            // Load next chapter
            setTimeout(() => {
                loadChapter(currentChapter);
            }, 500);
        }

        // Enhanced App Handler
        function openApp(appName) {
            console.log('Opening app:', appName);
            
            // Track exploration
            if (!gameState.appsVisited) gameState.appsVisited = [];
            if (!gameState.appsVisited.includes(appName)) {
                gameState.appsVisited.push(appName);
                addExperience(15);
                
                if (gameState.appsVisited.length === 5) {
                    showAchievement('explorer');
                }
            }
            
            // Update active dock app
            document.querySelectorAll('.dock-app').forEach(app => {
                app.classList.remove('active');
            });
            event.target.closest('.dock-app').classList.add('active');

            // Add haptic feedback simulation
            if (navigator.vibrate) {
                navigator.vibrate(10);
            }

            // Create immersive app experience
            const container = document.getElementById('storyContainer');
            const glowEffect = document.getElementById('glowEffect');
            
            // Add transition effect
            container.style.opacity = '0';
            setTimeout(() => {
                switch(appName) {
                    case 'library':
                        showLibrary();
                        break;
                    case 'ritual':
                        showRitualMode();
                        break;
                    case 'settings':
                        showSettings();
                        break;
                    case 'timeline':
                        showDevelopmentTimeline();
                        break;
                    default:
                        loadChapter(0);
                }
                container.style.opacity = '1';
                
                // Enhanced glow effect
                glowEffect.classList.add('glow-active');
                setTimeout(() => {
                    glowEffect.classList.remove('glow-active');
                }, 2000);
            }, 300);
        }

        // Enhanced Book Opening
        function openBook(bookId) {
            // Track books read
            if (!gameState.booksRead) gameState.booksRead = 0;
            gameState.booksRead++;
            
            if (gameState.booksRead === 1) {
                showAchievement('bookOpened');
            }
            
            addExperience(30);
            
            const container = document.getElementById('storyContainer');
            const bookData = {
                'sacred-texts': {
                    title: 'Sacred Texts',
                    content: 'The ancient wisdom flows through digital pages, each character a vessel for timeless truth. In this sanctuary, you connect with generations of seekers who found solace in written words.'
                },
                'digital-poetry': {
                    title: 'Digital Poetry',
                    content: 'Pixels dance like fireflies in the night, forming verses that speak to the modern soul. Each line carefully crafted to resonate with the rhythm of contemporary life.'
                },
                'technical-manuals': {
                    title: 'Technical Manuals',
                    content: 'The art of sanctuary engineering revealed. Every circuit, every line of code, every material choice explained in detail for those who wish to understand the craft.'
                },
                'personal-journal': {
                    title: 'Personal Journal',
                    content: 'Your private sanctuary within the sanctuary. Here, thoughts flow freely without judgment, dreams take shape, and reflections find their home.'
                }
            };
            
            const book = bookData[bookId];
            container.innerHTML = `
                <div class="story-content fade-in">
                    <h1 class="story-title">${book.title}</h1>
                    <div class="book-content">
                        <p class="story-text">${book.content}</p>
                        <div class="reading-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 35%"></div>
                            </div>
                            <span class="progress-text">35% Complete</span>
                        </div>
                    </div>
                    <div class="choice-container">
                        <button class="choice-button" onclick="continueReading()">
                            <i class="fas fa-book-reader choice-icon"></i>
                            Continue Reading
                        </button>
                        <button class="choice-button" onclick="showLibrary()">
                            <i class="fas fa-book choice-icon"></i>
                            Back to Library
                        </button>
                    </div>
                </div>
            `;
        }

        // Enhanced Theme Function
        function setTheme(theme) {
            const root = document.documentElement;
            const themes = {
                'cherry': { primary: '#ffb6c1', secondary: '#db7093', tertiary: '#8b4789' },
                'midnight': { primary: '#4a5568', secondary: '#2d3748', tertiary: '#1a202c' },
                'dawn': { primary: '#f6ad55', secondary: '#ed8936', tertiary: '#dd6b20' },
                'ocean': { primary: '#4299e1', secondary: '#3182ce', tertiary: '#1e40af' },
                'forest': { primary: '#10b981', secondary: '#059669', tertiary: '#047857' },
                'sunset': { primary: '#f59e0b', secondary: '#d97706', tertiary: '#b45309' }
            };
            
            const selectedTheme = themes[theme];
            root.style.setProperty('--primary-color', selectedTheme.primary);
            root.style.setProperty('--secondary-color', selectedTheme.secondary);
            root.style.setProperty('--tertiary-color', selectedTheme.tertiary);
            
            // Update background filter based on theme
            const immersiveBg = document.querySelector('.immersive-background');
            if (immersiveBg) {
                const filters = {
                    'cherry': 'brightness(0.6) contrast(1.3) saturate(1.1)',
                    'midnight': 'brightness(0.4) contrast(1.2) saturate(0.8)',
                    'dawn': 'brightness(0.8) contrast(1.1) saturate(1.3)',
                    'ocean': 'brightness(0.5) contrast(1.4) saturate(1.2)',
                    'forest': 'brightness(0.5) contrast(1.3) saturate(0.9)',
                    'sunset': 'brightness(0.7) contrast(1.2) saturate(1.4)'
                };
                immersiveBg.style.filter = filters[theme] || filters['cherry'];
            }
            
            // Track theme changes
            if (!gameState.themesTried) gameState.themesTried = [];
            if (!gameState.themesTried.includes(theme)) {
                gameState.themesTried.push(theme);
                addExperience(10);
                
                if (gameState.themesTried.length === 1) {
                    showAchievement('themeChanged');
                }
            }
        }

        // Premium visual effects
        function initPremiumEffects() {
            const glowEffect = document.getElementById('glowEffect');
            const parallaxBg = document.querySelector('.parallax-bg');
            
            // Parallax mouse movement
            document.addEventListener('mousemove', (e) => {
                const x = (e.clientX / window.innerWidth - 0.5) * 20;
                const y = (e.clientY / window.innerHeight - 0.5) * 20;
                
                if (parallaxBg) {
                    parallaxBg.style.transform = `translate(${x}px, ${y}px) scale(1.1)`;
                }
            });
            
            // Glow pulse effect
            setInterval(() => {
                glowEffect.classList.toggle('glow-active');
            }, 3000);
            
            // Breathing background
            const immersiveBg = document.querySelector('.immersive-background');
            let breathingScale = 1;
            let breathingDirection = 1;
            
            setInterval(() => {
                breathingScale += 0.002 * breathingDirection;
                if (breathingScale > 1.05 || breathingScale < 0.95) {
                    breathingDirection *= -1;
                }
                if (immersiveBg) {
                    immersiveBg.style.filter = `brightness(0.6) contrast(1.3) saturate(1.1) scale(${breathingScale})`;
                }
            }, 50);
        }

        // Update time display
        function updateTime() {
            const now = new Date();
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            document.getElementById('timeDisplay').textContent = `${hours}:${minutes}`;
        }

        // Create cherry blossom petals
        function createSakuraPetals() {
            const container = document.getElementById('sakuraContainer');
            for (let i = 0; i < 8; i++) {
                const petal = document.createElement('div');
                petal.className = 'sakura-petal';
                petal.style.left = Math.random() * 100 + '%';
                petal.style.animationDuration = (Math.random() * 10 + 15) + 's';
                petal.style.animationDelay = Math.random() * 10 + 's';
                petal.style.opacity = Math.random() * 0.5 + 0.3;
                container.appendChild(petal);
            }
        }

        // Load story chapter
        function loadChapter(chapterIndex) {
            const chapter = storyData.chapters[chapterIndex];
            if (!chapter) return;

            const container = document.getElementById('storyContainer');
            const content = `
                <div class="story-content fade-in">
                    <h1 class="story-title">${chapter.title}</h1>
                    <p class="story-text">${chapter.text}</p>
                    <div class="choice-container">
                        ${chapter.choices.map(choice => `
                            <button class="choice-button" onclick="makeChoice('${choice.id}')">
                                <i class="fas fa-${choice.icon} choice-icon"></i>
                                ${choice.text}
                            </button>
                        `).join('')}
                    </div>
                </div>
            `;
            
            container.innerHTML = content;
        }

        // Handle choice selection
        function makeChoice(choiceId) {
            console.log('Choice made:', choiceId);
            
            // Add choice to history
            gameState.choices.push(choiceId);
            
            // Add energy cost
            gameState.energy = Math.max(0, gameState.energy - 10);
            updateEnergyBar();
            
            // Add experience
            addExperience(25);
            
            // Check for achievements
            if (gameState.choices.length === 1) {
                showAchievement('firstChoice');
            }
            
            // Add choice animation
            event.target.style.transform = 'scale(0.95)';
            setTimeout(() => {
                event.target.style.transform = '';
            }, 200);

            // Progress story based on choice
            if (choiceId === 'explore-left') {
                currentChapter = 1;
            } else if (choiceId === 'ritual' || choiceId === 'listen') {
                currentChapter = 2;
            } else if (choiceId === 'read' || choiceId === 'customize') {
                currentChapter = 3;
            } else if (choiceId === 'accept' || choiceId === 'master') {
                // End of demo - show completion message
                showCompletion();
                return;
            }

            // Load next chapter
            setTimeout(() => {
                loadChapter(currentChapter);
            }, 500);
        }

        // Show completion message
        function showCompletion() {
            const container = document.getElementById('storyContainer');
            const content = `
                <div class="story-content fade-in">
                    <h1 class="story-title">Your Sanctuary Awaits</h1>
                    <p class="story-text">
                        The M√ºnreader is ready. Your personal sanctuary for deep reading and focused presence. 
                        The device that wants nothing from you, except your attention.
                    </p>
                    <div class="choice-container">
                        <button class="choice-button" onclick="restartStory()">
                            <i class="fas fa-redo choice-icon"></i>
                            Begin Again
                        </button>
                    </div>
                </div>
            `;
            container.innerHTML = content;
        }

        // Restart story
        function restartStory() {
            currentChapter = 0;
            loadChapter(0);
        }

        // Dock app interactions
        function openApp(appName) {
            console.log('Opening app:', appName);
            
            // Update active dock app
            document.querySelectorAll('.dock-app').forEach(app => {
                app.classList.remove('active');
            });
            event.target.closest('.dock-app').classList.add('active');

            // Add haptic feedback simulation
            if (navigator.vibrate) {
                navigator.vibrate(10);
            }

            // Create immersive app experience
            const container = document.getElementById('storyContainer');
            const glowEffect = document.getElementById('glowEffect');
            
            // Add transition effect
            container.style.opacity = '0';
            setTimeout(() => {
                switch(appName) {
                    case 'library':
                        showLibrary();
                        break;
                    case 'ritual':
                        showRitualMode();
                        break;
                    case 'settings':
                        showSettings();
                        break;
                    default:
                        loadChapter(0);
                }
                container.style.opacity = '1';
                
                // Enhanced glow effect
                glowEffect.classList.add('glow-active');
                setTimeout(() => {
                    glowEffect.classList.remove('glow-active');
                }, 2000);
            }, 300);
        }

        // Library view
        function showLibrary() {
            const container = document.getElementById('storyContainer');
            container.innerHTML = `
                <div class="story-content fade-in">
                    <h1 class="story-title">Your Library</h1>
                    <div class="library-grid">
                        <div class="book-item" onclick="openBook('sacred-texts')">
                            <div class="book-cover">
                                <i class="fas fa-book-open"></i>
                            </div>
                            <div class="book-info">
                                <h3>Sacred Texts</h3>
                                <p>Ancient wisdom for modern minds</p>
                            </div>
                        </div>
                        <div class="book-item" onclick="openBook('digital-poetry')">
                            <div class="book-cover">
                                <i class="fas fa-feather"></i>
                            </div>
                            <div class="book-info">
                                <h3>Digital Poetry</h3>
                                <p>Contemporary verses in pixels</p>
                            </div>
                        </div>
                        <div class="book-item" onclick="openBook('technical-manuals')">
                            <div class="book-cover">
                                <i class="fas fa-cogs"></i>
                            </div>
                            <div class="book-info">
                                <h3>Technical Manuals</h3>
                                <p>The art of sanctuary engineering</p>
                            </div>
                        </div>
                        <div class="book-item" onclick="openBook('personal-journal')">
                            <div class="book-cover">
                                <i class="fas fa-pen"></i>
                            </div>
                            <div class="book-info">
                                <h3>Personal Journal</h3>
                                <p>Your private thoughts and reflections</p>
                            </div>
                        </div>
                    </div>
                    <div class="choice-container">
                        <button class="choice-button" onclick="backToStory()">
                            <i class="fas fa-arrow-left choice-icon"></i>
                            Back to Story
                        </button>
                    </div>
                </div>
            `;
        }

        // Ritual mode view
        function showRitualMode() {
            const container = document.getElementById('storyContainer');
            container.innerHTML = `
                <div class="story-content fade-in">
                    <h1 class="story-title">Reading Ritual</h1>
                    <div class="ritual-modes">
                        <div class="ritual-mode" onclick="selectRitual('sunrise')">
                            <div class="ritual-icon">
                                <i class="fas fa-sun"></i>
                            </div>
                            <h3>Sunrise Mode</h3>
                            <p>Begin your day with clarity and purpose</p>
                            <div class="ritual-time">6:00 AM - 9:00 AM</div>
                        </div>
                        <div class="ritual-mode" onclick="selectRitual('candlelight')">
                            <div class="ritual-icon">
                                <i class="fas fa-fire"></i>
                            </div>
                            <h3>Candlelight Mode</h3>
                            <p>Intimate reading with warm ambiance</p>
                            <div class="ritual-time">7:00 PM - 10:00 PM</div>
                        </div>
                        <div class="ritual-mode" onclick="selectRitual('moonlight')">
                            <div class="ritual-icon">
                                <i class="fas fa-moon"></i>
                            </div>
                            <h3>Moonlight Mode</h3>
                            <p>Late-night reading with soft glow</p>
                            <div class="ritual-time">10:00 PM - 1:00 AM</div>
                        </div>
                    </div>
                    <div class="choice-container">
                        <button class="choice-button" onclick="backToStory()">
                            <i class="fas fa-arrow-left choice-icon"></i>
                            Back to Story
                        </button>
                    </div>
                </div>
            `;
        }

        // Settings view
        function showSettings() {
            const container = document.getElementById('storyContainer');
            container.innerHTML = `
                <div class="story-content fade-in">
                    <h1 class="story-title">Sanctuary Settings</h1>
                    <div class="settings-grid">
                        <div class="setting-item">
                            <div class="setting-header">
                                <i class="fas fa-text-height"></i>
                                <h3>Text Size</h3>
                            </div>
                            <div class="setting-control">
                                <button onclick="adjustTextSize('decrease')">A-</button>
                                <span id="textSizeDisplay">100%</span>
                                <button onclick="adjustTextSize('increase')">A+</button>
                            </div>
                        </div>
                        <div class="setting-item">
                            <div class="setting-header">
                                <i class="fas fa-palette"></i>
                                <h3>Theme</h3>
                            </div>
                            <div class="setting-control">
                                <button onclick="setTheme('cherry')">Cherry</button>
                                <button onclick="setTheme('midnight')">Midnight</button>
                                <button onclick="setTheme('dawn')">Dawn</button>
                                <button onclick="setTheme('ocean')">Ocean</button>
                                <button onclick="setTheme('forest')">Forest</button>
                                <button onclick="setTheme('unset')">Unset</button>
                            </div>
                        </div>
                        <div class="setting-item">
                            <div class="setting-header">
                                <i class="fas fa-volume-up"></i>
                                <h3>Ambient Sound</h3>
                            </div>
                            <div class="setting-control">
                                <button onclick="toggleSound('rain')">Rain</button>
                                <button onclick="toggleSound('forest')">Forest</button>
                                <button onclick="toggleSound('silence')">Silence</button>
                            </div>
                        </div>
                        <div class="setting-item">
                            <div class="setting-header">
                                <i class="fas fa-leaf"></i>
                                <h3>Petals</h3>
                            </div>
                            <div class="setting-control">
                                <button onclick="togglePetals()">Toggle</button>
                                <span id="petalStatus">Active</span>
                            </div>
                        </div>
                    </div>
                    <div class="choice-container">
                        <button class="choice-button" onclick="backToStory()">
                            <i class="fas fa-arrow-left choice-icon"></i>
                            Back to Story
                        </button>
                    </div>
                </div>
            `;
        }

        // Book opening
        function openBook(bookId) {
            const container = document.getElementById('storyContainer');
            const bookData = {
                'sacred-texts': {
                    title: 'Sacred Texts',
                    content: 'The ancient wisdom flows through digital pages, each character a vessel for timeless truth. In this sanctuary, you connect with generations of seekers who found solace in written words.'
                },
                'digital-poetry': {
                    title: 'Digital Poetry',
                    content: 'Pixels dance like fireflies in the night, forming verses that speak to the modern soul. Each line carefully crafted to resonate with the rhythm of contemporary life.'
                },
                'technical-manuals': {
                    title: 'Technical Manuals',
                    content: 'The art of sanctuary engineering revealed. Every circuit, every line of code, every material choice explained in detail for those who wish to understand the craft.'
                },
                'personal-journal': {
                    title: 'Personal Journal',
                    content: 'Your private sanctuary within the sanctuary. Here, thoughts flow freely without judgment, dreams take shape, and reflections find their home.'
                }
            };
            
            const book = bookData[bookId];
            container.innerHTML = `
                <div class="story-content fade-in">
                    <h1 class="story-title">${book.title}</h1>
                    <div class="book-content">
                        <p class="story-text">${book.content}</p>
                        <div class="reading-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 35%"></div>
                            </div>
                            <span class="progress-text">35% Complete</span>
                        </div>
                    </div>
                    <div class="choice-container">
                        <button class="choice-button" onclick="continueReading()">
                            <i class="fas fa-book-reader choice-icon"></i>
                            Continue Reading
                        </button>
                        <button class="choice-button" onclick="showLibrary()">
                            <i class="fas fa-book choice-icon"></i>
                            Back to Library
                        </button>
                    </div>
                </div>
            `;
        }

        // Ritual selection
        function selectRitual(ritualType) {
            const container = document.getElementById('storyContainer');
            const ritualData = {
                'sunrise': {
                    title: 'Sunrise Ritual',
                    description: 'The morning light filters through your sanctuary. The M√ºnreader awakens with gentle warmth, preparing your mind for a day of focused reading and deep contemplation.',
                    duration: '3 hours',
                    benefits: ['Enhanced focus', 'Memory retention', 'Creative clarity']
                },
                'candlelight': {
                    title: 'Candlelight Ritual',
                    description: 'Soft, warm light creates an intimate atmosphere perfect for deep reading. The world outside fades away, leaving only you and the text in sacred communion.',
                    duration: '3 hours',
                    benefits: ['Deep relaxation', 'Emotional connection', 'Stress reduction']
                },
                'moonlight': {
                    title: 'Moonlight Ritual',
                    description: 'The moon-phase glow guides your reading in the quiet hours. Night becomes a canvas for profound insights and nocturnal wisdom.',
                    duration: '3 hours',
                    benefits: ['Enhanced creativity', 'Introspection', 'Peaceful sleep']
                }
            };
            
            const ritual = ritualData[ritualType];
            container.innerHTML = `
                <div class="story-content fade-in">
                    <h1 class="story-title">${ritual.title}</h1>
                    <div class="ritual-details">
                        <p class="story-text">${ritual.description}</p>
                        <div class="ritual-stats">
                            <div class="stat-item">
                                <i class="fas fa-clock"></i>
                                <span>Duration: ${ritual.duration}</span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-star"></i>
                                <span>Benefits:</span>
                            </div>
                        </div>
                        <div class="benefits-list">
                            ${ritual.benefits.map(benefit => `
                                <div class="benefit-item">
                                    <i class="fas fa-check-circle"></i>
                                    <span>${benefit}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    <div class="choice-container">
                        <button class="choice-button" onclick="startRitual('${ritualType}')">
                            <i class="fas fa-play choice-icon"></i>
                            Begin Ritual
                        </button>
                        <button class="choice-button" onclick="showRitualMode()">
                            <i class="fas fa-arrow-left choice-icon"></i>
                            Back to Rituals
                        </button>
                    </div>
                </div>
            `;
        }

        // Start ritual
        function startRitual(ritualType) {
            const container = document.getElementById('storyContainer');
            container.innerHTML = `
                <div class="story-content fade-in">
                    <h1 class="story-title">Ritual in Progress</h1>
                    <div class="ritual-active">
                        <div class="ritual-timer">
                            <div class="timer-display">03:00:00</div>
                            <div class="timer-label">Time Remaining</div>
                        </div>
                        <div class="ritual-status">
                            <i class="fas fa-spa fa-spin"></i>
                            <p>Deep reading mode activated</p>
                            <p class="status-text">All notifications silenced. Sanctuary engaged.</p>
                        </div>
                        <div class="ritual-progress">
                            <div class="progress-ring">
                                <div class="progress-ring-circle"></div>
                            </div>
                        </div>
                    </div>
                    <div class="choice-container">
                        <button class="choice-button" onclick="pauseRitual()">
                            <i class="fas fa-pause choice-icon"></i>
                            Pause Ritual
                        </button>
                        <button class="choice-button" onclick="endRitual()">
                            <i class="fas fa-stop choice-icon"></i>
                            End Ritual
                        </button>
                    </div>
                </div>
            `;
            
            // Start timer
            startRitualTimer();
        }

        // Ritual timer
        let ritualInterval;
        function startRitualTimer() {
            let seconds = 10800; // 3 hours in seconds
            ritualInterval = setInterval(() => {
                if (seconds <= 0) {
                    clearInterval(ritualInterval);
                    completeRitual();
                    return;
                }
                
                seconds--;
                const hours = Math.floor(seconds / 3600);
                const minutes = Math.floor((seconds % 3600) / 60);
                const secs = seconds % 60;
                
                const display = document.querySelector('.timer-display');
                if (display) {
                    display.textContent = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
                }
                
                // Update progress ring
                const progress = ((10800 - seconds) / 10800) * 100;
                const ring = document.querySelector('.progress-ring-circle');
                if (ring) {
                    ring.style.strokeDasharray = `${progress} 100`;
                }
            }, 1000);
        }

        // Complete ritual
        function completeRitual() {
            clearInterval(ritualInterval);
            const container = document.getElementById('storyContainer');
            container.innerHTML = `
                <div class="story-content fade-in">
                    <h1 class="story-title">Ritual Complete</h1>
                    <div class="ritual-complete">
                        <i class="fas fa-check-circle"></i>
                        <p class="story-text">Your reading ritual has been completed. You have spent quality time in deep focus, strengthening your connection with the written word.</p>
                        <div class="ritual-stats-complete">
                            <div class="stat-complete">
                                <span class="stat-number">3</span>
                                <span class="stat-label">Hours Focused</span>
                            </div>
                            <div class="stat-complete">
                                <span class="stat-number">‚àû</span>
                                <span class="stat-label">Distractions Avoided</span>
                            </div>
                        </div>
                    </div>
                    <div class="choice-container">
                        <button class="choice-button" onclick="showRitualMode()">
                            <i class="fas fa-redo choice-icon"></i>
                            Start New Ritual
                        </button>
                        <button class="choice-button" onclick="backToStory()">
                            <i class="fas fa-home choice-icon"></i>
                            Back to Story
                        </button>
                    </div>
                </div>
            `;
        }

        // Settings functions
        let textSize = 100;
        function adjustTextSize(action) {
            if (action === 'increase' && textSize < 150) {
                textSize += 10;
            } else if (action === 'decrease' && textSize > 80) {
                textSize -= 10;
            }
            
            document.querySelector('.story-text').style.fontSize = `${textSize * 0.17}px`;
            document.getElementById('textSizeDisplay').textContent = `${textSize}%`;
        }

        function setTheme(theme) {
            const root = document.documentElement;
            const themes = {
                'cherry': { primary: '#ffb6c1', secondary: '#db7093', tertiary: '#8b4789' },
                'midnight': { primary: '#4a5568', secondary: '#2d3748', tertiary: '#1a202c' },
                'dawn': { primary: '#f6ad55', secondary: '#ed8936', tertiary: '#dd6b20' },
                'ocean': { primary: '#4299e1', secondary: '#3182ce', tertiary: '#1e40af' },
                'forest': { primary: '#10b981', secondary: '#059669', tertiary: '#047857' },
                'sunset': { primary: '#f59e0b', secondary: '#d97706', tertiary: '#b45309' }
            };
            
            const selectedTheme = themes[theme];
            root.style.setProperty('--primary-color', selectedTheme.primary);
            root.style.setProperty('--secondary-color', selectedTheme.secondary);
            root.style.setProperty('--tertiary-color', selectedTheme.tertiary);
            
            // Update background filter based on theme
            const immersiveBg = document.querySelector('.immersive-background');
            if (immersiveBg) {
                const filters = {
                    'cherry': 'brightness(0.6) contrast(1.3) saturate(1.1)',
                    'midnight': 'brightness(0.4) contrast(1.2) saturate(0.8)',
                    'dawn': 'brightness(0.8) contrast(1.1) saturate(1.3)',
                    'ocean': 'brightness(0.5) contrast(1.4) saturate(1.2)',
                    'forest': 'brightness(0.5) contrast(1.3) saturate(0.9)',
                    'sunset': 'brightness(0.7) contrast(1.2) saturate(1.4)'
                };
                immersiveBg.style.filter = filters[theme] || filters['cherry'];
            }
        }

        let soundEnabled = true;
        function toggleSound(type) {
            soundEnabled = !soundEnabled;
            // In a real implementation, this would control ambient sound
            console.log(`Sound ${soundEnabled ? 'enabled' : 'disabled'}: ${type}`);
        }

        let petalsEnabled = true;
        function togglePetals() {
            petalsEnabled = !petalsEnabled;
            const petals = document.querySelectorAll('.sakura-petal');
            petals.forEach(petal => {
                petal.style.display = petalsEnabled ? 'block' : 'none';
            });
            document.getElementById('petalStatus').textContent = petalsEnabled ? 'Active' : 'Inactive';
        }

        // Navigation functions
        function backToStory() {
            loadChapter(currentChapter);
        }

        function continueReading() {
            // Simulate continuing to read
            console.log('Continuing reading...');
        }

        function pauseRitual() {
            clearInterval(ritualInterval);
            console.log('Ritual paused');
        }

        function endRitual() {
            clearInterval(ritualInterval);
            completeRitual();
        }

        // Add touch feedback
        document.addEventListener('DOMContentLoaded', function() {
            init();
            
            // Add touch feedback to all interactive elements
            document.querySelectorAll('.choice-button, .dock-app').forEach(element => {
                element.addEventListener('touchstart', function() {
                    this.style.transform = 'scale(0.95)';
                });
                
                element.addEventListener('touchend', function() {
                    this.style.transform = '';
                });
            });
        });

        // Premium Development Timeline
        function showDevelopmentTimeline() {
            const container = document.getElementById('storyContainer');
            container.innerHTML = `
                <div class="story-content fade-in">
                    <h1 class="story-title">Development Timeline</h1>
                    <div class="timeline-container">
                        <div class="timeline-phase">
                            <div class="phase-header">
                                <div class="phase-icon">
                                    <i class="fas fa-rocket"></i>
                                </div>
                                <div class="phase-info">
                                    <h3>Phase 1: Foundation</h3>
                                    <p class="phase-date">Completed ‚Ä¢ Premium Polish Applied</p>
                                </div>
                            </div>
                            <div class="phase-content">
                                <div class="achievement-item">
                                    <i class="fas fa-check-circle"></i>
                                    <span>World-Class UI Architecture</span>
                                </div>
                                <div class="achievement-item">
                                    <i class="fas fa-check-circle"></i>
                                    <span>Premium Glassmorphism System</span>
                                </div>
                                <div class="achievement-item">
                                    <i class="fas fa-check-circle"></i>
                                    <span>Advanced Game Mechanics</span>
                                </div>
                            </div>
                        </div>

                        <div class="timeline-phase">
                            <div class="phase-header">
                                <div class="phase-icon">
                                    <i class="fas fa-gem"></i>
                                </div>
                                <div class="phase-info">
                                    <h3>Phase 2: Enhancement</h3>
                                    <p class="phase-date">In Progress ‚Ä¢ Premium Features</p>
                                </div>
                            </div>
                            <div class="phase-content">
                                <div class="achievement-item">
                                    <i class="fas fa-spinner fa-spin"></i>
                                    <span>Advanced Animation System</span>
                                </div>
                                <div class="achievement-item">
                                    <i class="fas fa-spinner fa-spin"></i>
                                    <span>Particle Effects Engine</span>
                                </div>
                                <div class="achievement-item">
                                    <i class="fas fa-spinner fa-spin"></i>
                                    <span>Dynamic Sound System</span>
                                </div>
                                <div class="achievement-item">
                                    <i class="fas fa-spinner fa-spin"></i>
                                    <span>Save/Load Game States</span>
                                </div>
                            </div>
                        </div>

                        <div class="timeline-phase">
                            <div class="phase-header">
                                <div class="phase-icon">
                                    <i class="fas fa-crown"></i>
                                </div>
                                <div class="phase-info">
                                    <h3>Phase 3: Polish</h3>
                                    <p class="phase-date">Today ‚Ä¢ Premium Deployment</p>
                                </div>
                            </div>
                            <div class="phase-content">
                                <div class="achievement-item locked">
                                    <i class="fas fa-lock"></i>
                                    <span>Micro-interactions Refinement</span>
                                </div>
                                <div class="achievement-item locked">
                                    <i class="fas fa-lock"></i>
                                    <span>Performance Optimization</span>
                                </div>
                                <div class="achievement-item locked">
                                    <i class="fas fa-lock"></i>
                                    <span>Cross-platform Compatibility</span>
                                </div>
                                <div class="achievement-item locked">
                                    <i class="fas fa-lock"></i>
                                    <span>Production Deployment</span>
                                </div>
                            </div>
                        </div>

                        <div class="timeline-stats">
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-code"></i>
                                </div>
                                <div class="stat-details">
                                    <h4>Code Quality</h4>
                                    <div class="stat-bar">
                                        <div class="stat-fill" style="width: 95%"></div>
                                    </div>
                                    <span class="stat-label">Premium Level</span>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-palette"></i>
                                </div>
                                <div class="stat-details">
                                    <h4>Visual Polish</h4>
                                    <div class="stat-bar">
                                        <div class="stat-fill" style="width: 88%"></div>
                                    </div>
                                    <span class="stat-label">World-Class</span>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-tachometer-alt"></i>
                                </div>
                                <div class="stat-details">
                                    <h4>Performance</h4>
                                    <div class="stat-bar">
                                        <div class="stat-fill" style="width: 92%"></div>
                                    </div>
                                    <span class="stat-label">Optimized</span>
                                </div>
                            </div>
                        </div>

                        <div class="timeline-milestone">
                            <div class="milestone-header">
                                <i class="fas fa-flag-checkered"></i>
                                <h3>Today's Milestone</h3>
                            </div>
                            <div class="milestone-content">
                                <p class="milestone-desc">
                                    Premium polish deployment with world-class animations, 
                                    advanced particle systems, and production-ready optimization.
                                </p>
                                <div class="milestone-progress">
                                    <div class="progress-ring-large">
                                        <div class="progress-ring-large-circle"></div>
                                    </div>
                                    <span class="milestone-percent">88%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="choice-container">
                        <button class="choice-button" onclick="backToStory()">
                            <i class="fas fa-arrow-left choice-icon"></i>
                            Back to Story
                        </button>
                        <button class="choice-button premium" onclick="deployPremiumFeatures()">
                            <i class="fas fa-rocket choice-icon"></i>
                            Deploy Premium Polish
                        </button>
                    </div>
                </div>
            `;
        }

        // Deploy Premium Features
        function deployPremiumFeatures() {
            // Add advanced particle system
            createAdvancedParticleSystem();
            
            // Add premium sound system
            initPremiumSoundSystem();
            
            // Add micro-interactions
            initMicroInteractions();
            
            // Show achievement
            showAchievement('premiumDeployed');
            
            // Update timeline
            setTimeout(() => {
                showDevelopmentTimeline();
            }, 1000);
        }

        // Advanced Particle System
        function createAdvancedParticleSystem() {
            const container = document.getElementById('sakuraContainer');
            
            // Create multiple particle types
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'advanced-particle';
                
                // Random particle types
                const types = ['sakura', 'sparkle', 'glow'];
                const type = types[Math.floor(Math.random() * types.length)];
                
                particle.classList.add(`particle-${type}`);
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDuration = (Math.random() * 15 + 10) + 's';
                particle.style.animationDelay = Math.random() * 5 + 's';
                particle.style.opacity = Math.random() * 0.6 + 0.2;
                
                container.appendChild(particle);
            }
        }

        // Premium Sound System
        function initPremiumSoundSystem() {
            // Create audio context for premium sounds
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            
            // Sound effects library
            const sounds = {
                click: () => playTone(800, 0.1),
                achievement: () => playTone(1200, 0.2),
                levelUp: () => playTone(1600, 0.3),
                hover: () => playTone(600, 0.05)
            };
            
            // Attach sounds to interactions
            document.querySelectorAll('.choice-button').forEach(button => {
                button.addEventListener('click', sounds.click);
                button.addEventListener('mouseenter', sounds.hover);
            });
        }

        // Play tone function
        function playTone(frequency, duration) {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = frequency;
                oscillator.type = 'sine';
                gainNode.gain.value = 0.1;
                
                oscillator.start();
                oscillator.stop(audioContext.currentTime + duration);
            } catch (e) {
                console.log('Audio not supported');
            }
        }

        // Micro-interactions
        function initMicroInteractions() {
            // Add ripple effects to all buttons
            document.querySelectorAll('.choice-button, .dock-app').forEach(element => {
                element.addEventListener('click', createRipple);
            });
        }

        // Create ripple effect
        function createRipple(e) {
            const button = e.currentTarget;
            const ripple = document.createElement('span');
            const rect = button.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            
            ripple.className = 'ripple';
            ripple.style.width = ripple.style.height = size + 'px';
            ripple.style.left = (e.clientX - rect.left - size / 2) + 'px';
            ripple.style.top = (e.clientY - rect.top - size / 2) + 'px';
            
            button.appendChild(ripple);
            
            setTimeout(() => {
                ripple.remove();
            }, 600);
        }
    </script>
</body>
</html>
